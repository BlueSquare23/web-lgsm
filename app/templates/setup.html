{% extends "base.html" %}
{% block title %}Setup{% endblock %}

{% block content %}
      <br />
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-8 col-lg-6">
            <div class="card bg-dark border border-white rounded">
              <div class="card-header">
                <h3 class="mb-0">Create New User</h3>
              </div>
              <div class="card-body bg-dark">
                <form method="POST" id="userForm">
                  {{ form.hidden_tag() }}
                  <div class="form-group mb-3">
                    {{ form.username.label(class="text-white") }}
                    {{ form.username() }}
                  </div>
                  
                  <div class="form-group mb-1">
                    {{ form.password1.label(class="text-white") }}
                    <div class="password-container">
                      {{ form.password1() }}
                      <span class="password-toggle" id="togglePassword1">
                        <i class="bi bi-eye text-white"></i>
                      </span>
                    </div>
                  </div>
                  
                  <div class="form-group mb-3">
                    {{ form.password2.label(class="text-white") }}
                    <div class="password-container">
                      {{ form.password2() }}
                      <span class="password-toggle" id="togglePassword2">
                        <i class="bi bi-eye text-white"></i>
                      </span>
                    </div>
                    <div class="invalid-feedback" id="confirmPasswordFeedback"></div>
                  </div>

                  <!-- Password Strength Meter -->
                  <div class="mb-3">
                    <div class="progress" id="passwordStrengthBar">
                      <div class="progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <div class="password-feedback" id="passwordFeedback"></div>
                  </div>
                  
                  
                  <!-- Password Requirements -->
                  <div class="alert alert-primary">
                    <small>
                      <i class="bi bi-info-circle"></i> 
                      Passwords must meet the following requirements:
                    </small>
                    <ul class="requirement-list">
                      <li id="reqLength" class="invalid-requirement"><i class="bi bi-x-circle-fill"></i> At least 12 characters long</li>
                      <li id="reqDigit" class="invalid-requirement"><i class="bi bi-x-circle-fill"></i> 1 number [0-9]</li>
                      <li id="reqUppercase" class="invalid-requirement"><i class="bi bi-x-circle-fill"></i> 1 uppercase letter</li>
                      <li id="reqLowercase" class="invalid-requirement"><i class="bi bi-x-circle-fill"></i> 1 lowercase letter</li>
                      <li id="reqSpecial" class="invalid-requirement"><i class="bi bi-x-circle-fill"></i> 1 special character</li>
                    </ul>
                  </div>

                  <div class="mb-4">
                      <div class="form-check form-switch">
                          {{ form.enable_otp(class="form-check-input") }}
                          {{ form.enable_otp.label(class="form-check-label text-white") }}
                      </div>
                  </div>
                  
                  <div class="d-grid">
                    {{ form.submit(id="submitButton", class="btn btn-primary btn-lg", disabled=True) }}
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="static/js/password-strength.js"></script>

{% endblock %}
