version: '3'

services:
  web-lgsm:
    build: 
      context: .
      args:
        GID: ${GID}
    container_name: web-lgsm
    ports:
      - "5000:5000"
{% for server in servers %}      - "{{server.port}}:{{server.port}}"{% endfor %}
    volumes:
      - ./main.conf:/home/web-lgsm/main.conf:rw
      - ./app/database.db:/home/web-lgsm/database.db:rw
      - ./GameServers:/home/web-lgsm/GameServers:rw
{% for server in servers %}      - ./GameServers:/home/{{server.short_name}}/GameServers:rw{% endfor %}
    environment:
      - GID=${GID}
    networks:
      - web-lgsm-net

networks:
  web-lgsm-net:
    driver: bridge
